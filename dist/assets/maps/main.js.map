{"version":3,"sources":["src/app.js"],"names":["$","Bullet","I","active","xVelocity","yVelocity","speed","width","height","color","inBounds","x","CANVAS_WIDTH","y","CANVAS_HEIGHT","draw","canvas","fillStyle","this","fillRect","update","keydown","player","shoot","clamp","playerBullets","forEach","bullet","filter","clearRect","FPS","canvasElement","get","getContext","appendTo","setInterval","val","min","max","console","log","bulletPosition","midpoint","newBullet","push","keys","document","e","keyCode","keyup"],"mappings":"AACAA,EAAE,WAiHD,QAASC,GAAOC,GA0Bf,MAzBAA,GAAEC,QAAS,EAEXD,EAAEE,UAAY,EACdF,EAAEG,WAAaH,EAAEI,MACjBJ,EAAEK,MAAQ,EACVL,EAAEM,OAAS,EACXN,EAAEO,MAAQ,OAEVP,EAAEQ,SAAW,WACZ,MAAQR,GAAES,GAAK,GAAKT,EAAES,GAAKC,GACzBV,EAAEW,GAAK,GAAKX,EAAEW,GAAKC,GAGtBZ,EAAEa,KAAO,WACRC,EAAOC,UAAYC,KAAKT,MACxBO,EAAOG,SAASD,KAAKP,EAAGO,KAAKL,EAAGK,KAAKX,MAAOW,KAAKV,SAGlDN,EAAEkB,OAAS,WACVlB,EAAES,GAAKT,EAAEE,UACTF,EAAEW,GAAKX,EAAEG,UAETH,EAAEC,OAASD,EAAEC,QAAUD,EAAEQ,YAGnBR,EAOR,QAASkB,KAEM,SAAXC,GACFC,EAAOC,QAEM,QAAXF,IACFC,EAAOT,GAAK,GAGE,MAAXQ,IACHC,EAAOT,GAAK,GAGE,QAAXQ,IACFC,EAAOX,GAAK,GAGC,SAAXU,IACHC,EAAOX,GAAK,GAIbW,EAAOX,EAAIW,EAAOE,MAAMF,EAAOX,EAAG,EAAGC,EAAeU,EAAOf,OAC3De,EAAOT,EAAIS,EAAOE,MAAMF,EAAOT,EAAG,EAAGC,EAAgBQ,EAAOd,QAG5DiB,EAAcC,QAAQ,SAASC,GAC9BA,EAAOP,WAIRK,EAAgBA,EAAcG,OAAO,SAASD,GAC7C,MAAOA,GAAOxB,SAMhB,QAASY,KAERC,EAAOa,UAAU,EAAG,EAAGjB,EAAcE,GAGrCQ,EAAOP,OAGPU,EAAcC,QAAQ,SAASC,GAE9BA,EAAOZ,SA/LT,GAAIH,GAAe,IACfE,EAAgB,IAChBgB,EAAM,GAGNC,EAAgB/B,EAAE,kBAAoBY,EACpB,aAAeE,EAAgB,eACjDE,EAASe,EAAcC,IAAI,GAAGC,WAAW,KAC7CF,GAAcG,SAAS,QAMvBC,YAAY,WACVf,IACAL,KACC,IAAKe,EAMR,IAAIR,IACHb,MAAO,OACPE,EAAG,IACHE,EAAG,IACHN,MAAO,GACPC,OAAQ,GACRO,KAAM,WACLC,EAAOC,UAAYC,KAAKT,MACxBO,EAAOG,SAASD,KAAKP,EAAGO,KAAKL,EAAGK,KAAKX,MAAOW,KAAKV,SAElDgB,MAAO,SAASY,EAAKC,EAAKC,GAQzB,MANSD,GAAND,EACFA,EAAMC,EACED,EAAME,IACdF,EAAME,GAGAF,GAERb,MAAO,WACNgB,QAAQC,IAAI,UAEZ,IAAIC,GAAiBvB,KAAKwB,WACtBC,EAAY1C,GACdK,MAAO,EACPK,EAAG8B,EAAe9B,EAClBE,EAAG4B,EAAe5B,GAGpBY,GAAcmB,KAAKD,GAEnBJ,QAAQC,IAAIf,IAGbiB,SAAU,WACT,OACC/B,EAAGO,KAAKP,EAAIO,KAAKX,MAAM,EACvBM,EAAGK,KAAKL,EAAIK,KAAKV,OAAO,KAQvBqC,GAAQ,OAAQ,OAAQ,QAAS,KAAM,OAAQ,SAC/CxB,EAAU,MAIdrB,GAAE8C,UAAUzB,QAAQ,SAAS0B,GAC5BR,QAAQC,IAAIO,EAAEC,SAEE,IAAbD,EAAEC,SACJT,QAAQC,IAAI,sBACZnB,EAAUwB,EAAK,IAEM,IAAbE,EAAEC,QACV3B,EAAUwB,EAAK,GAEM,IAAbE,EAAEC,QACV3B,EAAUwB,EAAK,GAGM,IAAbE,EAAEC,QAEV3B,EAAUwB,EAAK,GAGM,IAAbE,EAAEC,UAEV3B,EAAUwB,EAAK,MAKjB7C,EAAE8C,UAAUG,MAAM,SAASF,GAE1B1B,EAAUwB,EAAK,IAMhB,IAAIpB","file":"main.js","sourcesContent":["// Don't start until domReady\r\n$(function(){\r\n\r\n\t// Static Vars\r\n\tvar CANVAS_WIDTH = 480;\r\n\tvar CANVAS_HEIGHT = 320;\r\n\tvar FPS = 30;\r\n\r\n\t// Create and insert DOM\r\n\tvar canvasElement = $(\"<canvas width='\" + CANVAS_WIDTH + \r\n\t                      \"' height='\" + CANVAS_HEIGHT + \"'></canvas>\");\r\n\tvar canvas = canvasElement.get(0).getContext(\"2d\");\r\n\tcanvasElement.appendTo('body');\r\n\r\n\r\n\t// Game loop\r\n\t// \r\n\t// Run this code every X seconds\r\n\tsetInterval(function() {\r\n\t  update();\r\n\t  draw();\r\n\t}, 1000/FPS);\r\n\r\n\r\n\r\n\r\n\t// Init vars\r\n\tvar player = {\r\n\t\tcolor: \"#00A\",\r\n\t\tx: 220,\r\n\t\ty: 270,\r\n\t\twidth: 32,\r\n\t\theight: 32,\r\n\t\tdraw: function() {\r\n\t\t\tcanvas.fillStyle = this.color;\r\n\t\t\tcanvas.fillRect(this.x, this.y, this.width, this.height);\r\n\t\t},\r\n\t\tclamp: function(val, min, max)\r\n\t\t{\r\n\t\t\tif(val < min){\r\n\t\t\t\tval = min;\r\n\t\t\t}else if(val > max){\r\n\t\t\t\tval = max;\r\n\t\t\t}\r\n\r\n\t\t\treturn val;\r\n\t\t},\r\n\t\tshoot: function() {\r\n\t\t\tconsole.log(\"Pew pew\");\r\n\r\n\t\t\tvar bulletPosition = this.midpoint();\r\n\t\t\tvar newBullet = Bullet({\r\n\t\t\t\t\tspeed: 5,\r\n\t\t\t\t\tx: bulletPosition.x,\r\n\t\t\t\t\ty: bulletPosition.y\r\n\t\t\t\t});\r\n\r\n\t\t\tplayerBullets.push(newBullet);\r\n\r\n\t\t\tconsole.log(playerBullets);\r\n\t\t\t// :) Well at least adding the key binding was easy...\r\n\t\t},\r\n\t\tmidpoint: function() {\r\n\t\t\treturn {\r\n\t\t\t\tx: this.x + this.width/2,\r\n\t\t\t\ty: this.y + this.height/2\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n\r\n\r\n\r\n\t/* KEY MANAGEMENT */\r\n\tvar keys = [\"none\", \"left\", \"right\", \"up\", \"down\", \"space\"];\r\n\tvar keydown = \"none\";\r\n\t\r\n\r\n\t// When a key is down on our website\r\n\t$(document).keydown(function(e){\r\n\t\tconsole.log(e.keyCode);\r\n\r\n\t\tif(e.keyCode == 32){\r\n\t\t\tconsole.log(\"SPACE WAS PRESSED!\");\r\n\t\t\tkeydown = keys[5];\r\n\r\n\t\t}else if(e.keyCode == 40){\r\n\t\t\tkeydown = keys[4];\r\n\r\n\t\t}else if(e.keyCode == 38){\r\n\t\t\tkeydown = keys[3];\r\n\r\n\t\t// If the key is the left key...\r\n\t\t}else if(e.keyCode == 37){\r\n\t\t\t// Set keydown to \"left\"\r\n\t\t\tkeydown = keys[1];\r\n\r\n\t\t// if the ky is the right key...\r\n\t\t}else if(e.keyCode == 39){\r\n\t\t\t// Set keydown to \"right\"\r\n\t\t\tkeydown = keys[2];\r\n\t\t}\r\n\t});\r\n\r\n\t// When a key is down on our website..\r\n\t$(document).keyup(function(e){\r\n\t\t// No keys down\r\n\t\tkeydown = keys[0];\r\n\t});\r\n\r\n\r\n\r\n\t/* BULLET MANAGEMENT */\r\n\tvar playerBullets = [];\r\n\r\n\tfunction Bullet(I){\r\n\t\tI.active = true;\r\n\r\n\t\tI.xVelocity = 0;\r\n\t\tI.yVelocity = -I.speed;\r\n\t\tI.width = 3;\r\n\t\tI.height = 3;\r\n\t\tI.color = \"#000\";\r\n\r\n\t\tI.inBounds = function(){\r\n\t\t\treturn \tI.x >= 0 && I.x <= CANVAS_WIDTH &&\r\n\t\t\t\t\tI.y >= 0 && I.y <= CANVAS_HEIGHT;\r\n\t\t};\r\n\r\n\t\tI.draw = function() {\r\n\t\t\tcanvas.fillStyle = this.color;\r\n\t\t\tcanvas.fillRect(this.x, this.y, this.width, this.height);\r\n\t\t};\r\n\r\n\t\tI.update = function(){\r\n\t\t\tI.x += I.xVelocity;\r\n\t\t\tI.y += I.yVelocity;\r\n\r\n\t\t\tI.active = I.active && I.inBounds();\r\n\t\t};\r\n\r\n\t\treturn I;\r\n\t}\r\n\r\n\r\n\r\n\r\n\t// Update method\r\n\tfunction update() {\r\n\r\n\t\tif(keydown == \"space\"){\r\n\t\t\tplayer.shoot();\r\n\t\t}\r\n\t\tif(keydown == \"down\"){\r\n\t\t\tplayer.y += 5;\r\n\t\t}\r\n \r\n\t\tif (keydown == \"up\"){\r\n\t\t\tplayer.y -= 5;\r\n\t\t}\r\n\r\n\t\tif (keydown == \"left\") {\r\n\t\t \tplayer.x -= 5;\r\n\t\t}\r\n\r\n\t\tif (keydown == \"right\") {\r\n\t\t\tplayer.x += 5;\r\n\t\t}\r\n\r\n\t\t// PUT THE CLAMPS ON!!!!!!\r\n\t\tplayer.x = player.clamp(player.x, 0, CANVAS_WIDTH - player.width);\r\n\t\tplayer.y = player.clamp(player.y, 0, CANVAS_HEIGHT - player.height)\r\n\t\r\n\t\t// Updates x, y, and active\r\n\t\tplayerBullets.forEach(function(bullet) {\r\n\t\t\tbullet.update();\r\n\t\t});\r\n\r\n\t\t// Removes inactive bullets\r\n\t\tplayerBullets = playerBullets.filter(function(bullet){\r\n\t\t\treturn bullet.active;\r\n\t\t});\r\n\t}\r\n\r\n\r\n\t// Draw the update\r\n\tfunction draw() {\r\n\t\t// We have to clear our screen on each draw\r\n\t\tcanvas.clearRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);\r\n\r\n\t\t// Draw our player\r\n\t\tplayer.draw();\r\n\r\n\t\t// Draw all of our bullets\r\n\t\tplayerBullets.forEach(function(bullet){\r\n\t\t\t//console.log(bullet);\r\n\t\t\tbullet.draw();\r\n\t\t});\r\n\t}\r\n\r\n});"],"sourceRoot":"/source/"}